            <% winlosses.forEach(function(winloss){ %>   
            
            <div class="col-lg-8 recentbgdiv">
                <a href="match/<%= winloss._id %>">
                    <h2>
                        <%= winloss.bgs %>
                    </h2>
                    <span><%= winloss.created.toDateString() %></span></a>
            </div> 


            



                                <% winlosses.forEach(function(winloss){ %>
                                    <% let i = 0; %>
                                    
                                    <% if(winloss.bgs === 'Warsong Gulch' && winloss.victory === 'on') { %>
                                        <% i += 1; %>
                                    <% } else { %>
                                        <% console.log('loss') %>
                                    <% } %>
                                    <% let total = i; %>
                                    <%- total %>
                                <% }) %>


                                <% for (let i = 0; i <= winlosses.length; i++) { %>
                                    <% let x = 0; %>
                                    <% if(winlosses.bgs === 'Warsong Gulch' && winlosses.victory === 'on') { %>
                                        <% x += 1 %>
                                        <% console.log('added 1') %>
                                    <% } else { %>
                                        <% console.log(winlosses.bgs) %>
                                    <% } %>
                                    <% x %>
                                <% } %>



                                jessej alauererneshahha;lakjsherlkjerjkUjeuUUIIOOIUjajwhehas;lkdjhf;aslkerhhhehsjkhas asdf
                                asoikshjeljhas;elfja;sdlkfjas;ldgikausdgiuiguuawheharehwar;awejht;arlgbiuajsdgovjahweso;FHV;AOWSKEhjfnv;ALWKESfngjma;'elrkghba
                                dsfghna;sdkjlfgnb'aldksfgja;lskdjgvasdfh
                                asdflgkjas;dlfkajs;dlkgfdsguvuuuhehr;asdlkgja;sldkfja;sldfja;sldkfja;'sdlfja'roghibjaqe'pirhbgjAE
                                RS){gbohijkpA
                                Eghrb[lakjsherlkjerjkUjeuUUIIOOIUjajwhehasaeGHJBU
                                PGJb
                                pwer$GHJaoreiwhjgal;ekjrhg;alkejrhg;alkerhjgae
                                rhjaeorighn;W'ELRKGHNA;LSKJGH;ALKSJHGA
                                ewRGA;S/DFGHNAJSDFGHN;AKJDSHNG;AKJSDHGAE
                                RGH'ADKSFNGH;ALDKSFNHG;AKLJDSFHGBN;ALKSDEJRGHBNA;KLDJFHA;LDKFHJNA;LDKFJHA;LDKFJHADFHADFHN;ADLFKHJAD
                                FH;ADHJFHNJKNADF;HLKJNADF;KLGJHA;ELRKJHASDFH
                                ADFGNALFSFVALHALLELEUJA
                                
                                jfdjfa
                                
                                ]}





            <% if(user) { %>
                <% <a href="/logout"><button class="btn btn-dark my-2 my-sm-0">Log Out</button></a>; %>
            <% } else { %>
                <% <a href="/login"><button class="btn btn-dark my-2 my-sm-0">Log In</button></a> %>
            <% } %> 





                                <p>
                                    <img src="../css/images/propicph.png" alt=""> <br>
                                    <form action="/user/:id" method="POST">                                        
                                        <input type="file" name="propic" enctype="multipart/form-data"> <br>
                                        <button>Submit</button>
                                    </form>                                    
                                </p>









                                <h2>
                                <%= console.log(users) %>
                            </h2>
                                
                            <p>Member since <%= users.created.toDateString() %></p>
                            <p>
                                <% let submittedVictory = 0; %>
                                <% let submittedDefeat = 0; %>
                                <% let submittedTotal = 0; %>
                                <% winlosses.forEach(function(winloss){ %>
                                    <% if(winloss.user.id === users._id){ %>
                                        <% submittedTotal += 1; %>                                             
                                        <% if(winloss.victory === "on") { %>
                                            <% submittedVictory += 1; %>
                                        <% } else { %>
                                            <% submittedDefeat += 1; %>
                                        <% } %>
                                    <% } else { %>
                                        <% null %>
                                    <% } %>
                                    
                                <% }) %>
                                <span> Victories: <%= submittedVictory %></span>
                                <span> Defeats: <%= submittedDefeat %></span>
                                <span> Total: <%= submittedTotal %></span>






User.findByIdAndUpdate(req.params._id, function(err,users){
		if(err){
			console.log(err)
		} else {
			cloudinary.v2.uploader.upload(req.file.path, 
    			function(error, result) {console.log(result, error)});
			res.redirect('user/:id');
			console.log('Post request to user/:id')
		}
	})


image: req.file.map(f => ({url: f.path, filename: f.filename}))

app.get('/index', async function(req, res) {
	const winlosses = await Winloss.find({});
	res.render('index', { winlosses });	
	console.log('GET request to index');
});




console.log(req.user);
	const filter = { _id: req.user._id}
	const image = { image: req.file };
	await User.findOne(filter);
	const path = req.user.image.filename;
	delimages(path);	
	await User.updateOne(filter, image);
	await User.updateOne(filter, req.body);
	await user.save();
	console.log('PUT request to user/:id');
	console.log(user);
	res.redirect('/user');



    function delimages(x) {
	cloudinary.v2.uploader.destroy( x, function(error,result) {
		console.log(result, error)
	});
}


	const user = await User.findOne(filter);




    <div class="container recentbgs">
    
    <% winlosses.slice().reverse().forEach(function(winloss) { %>
        <div class="row justify-content-center">             
            <div class="col-lg-8 recentbgdiv">
                <a href="match/<%= winloss._id %>">
                    <h2>
                        <%= winloss.bgs %>
                    </h2>
                    <span><%= winloss.created.toDateString() %></span>
                    <span><% if(winloss.victory === "on") { %>
                        <h3 class="green">Victory</h3>
                    <% } else { %>
                        <h3 class="red"> Defeat</h3>
                    <% } %></span>
                </a>
                    <h5>Submitted by: <a href="/members/<%= winloss.user.id %>"><%= winloss.user.username %></a> </h5>
            </div>                          
        </div>
    <% }) %>
</div>